<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1 user-scalable=0">
    <title>Olive</title>
    <link rel="stylesheet" href="/styles/auth.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&display=swap" rel="stylesheet"> -->
    <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://www.dafontfree.net/embed/bGF0by1ib2xkJmRhdGEvNDYvbC82MzM2MS9MYXRvLUJvbGQudHRm" rel="stylesheet"
        type="text/css" />
    <!-- <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;1,900&display=swap" rel="stylesheet"> -->
    <script src="https://checkout.flutterwave.com/v3.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.3/js/intlTelInput.min.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.3/css/intlTelInput.min.css" />

    <!-- <script src="https://api.ravepay.co/flwv3-pug/getpaidx/api/flwpbf-inline.js"></script> -->


</head>

<body>
    <div class="container">
        <header>
            <div class="logo">
                <h1>logo</h1>
            </div>
            <!-- <div class="icon">
                <div class="user">
                    <a href="/profile">
                        <img src="/assest/OLIVE/Group-1.png" alt="" srcset="">
                    </a>
                </div>
                <a href="/dashboard">
                    <div class="home">
                        <img src="/assest/OLIVE/Group.png" alt="" srcset="">
                    </div>
                </a>
            </div> -->
        </header>

        <section class="largeImg">
            <div class="swiper">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper">
                    <!-- Slides -->
                    <div class="swiper-slide">
                        <img src="/assest/OLIVE/woman.png" />
                    </div>
                    <div class="swiper-slide">
                        <img src="/assest/OLIVE/ankara.png" />
                    </div>
                    <div class="swiper-slide">
                        <img style="height: 452px; width: 414px;object-fit: cover;" src="/assest/OLIVE/guy.png" />
                    </div>
                    <div class="swiper-slide">
                        <img src="/assest/OLIVE/flowergirl.png" />
                    </div>
                </div>
                <!-- If we need pagination -->
                <div class="swiper-pagination"></div>

                <!-- If we need navigation buttons -->

                <div class="swiper-button-prev">
                    <img class="carousel-l" src="/assest/OLIVE/Group 2.png" />
                </div>
                <div class="swiper-button-next">
                    <img class="carousel" src="/assest/OLIVE/Group 2.png" />
                </div>

                <!-- If we need scrollbar -->
                <div class="swiper-scrollbar"></div>

                <!-- 
            <img src="/assest/OLIVE/guy.png" />
            <img src="/assest/OLIVE/woman.png" />  -->
            </div>
            <!--  -->
        </section>
        <section class="content link_register">
            <h4 class="content_header">YOUTH CENTRIC DIGITAL ECOSYSTEM</h4>
            <p class="content_text">

                <strong>Olive platform</strong> is a triumvirate and youth-centric digital ecosystem built for creative
                enthusiasts
                seeking talent discovery, training, incubation, content production, publicity audience engagement and
                market nexus to monetize digital contents in music, movies, fashion, and creative expressions.
            </p>
            <div class="youtube">
                <img src="/assest/OLIVE/ladyYoutube.png" alt="" srcset="">
                <img class="youtubelogo" src="/assest/OLIVE/fontisto_youtube-play.png">
            </div>

            <b class="content_header register_link_header">JOIN OLIVE FOR FREE </b>
            <form class="register_link">
                <div class="number">
                    <label for="number">Please enter your phone number</label>
                    <!-- <input type="number" name="username" required> -->
                    <input id="phone" name="username" type="tel">

                    <img src="/assest/OLIVE/Line 2.png" alt="">
                </div>
                <div class="number">
                    <label for="email">Enter your email address </label>
                    <input type="email" name="email" required>
                    <img src="/assest/OLIVE/Line 2.png" alt="">
                </div>
                <div class="number">
                    <label for="name">Enter your full name</label>
                    <input type="text" name="name">
                    <img src="/assest/OLIVE/Line 2.png" alt="" required>
                </div>
                <div class="number">
                    <label for="password">Password</label>
                    <input type="password" id="password" required name="password">
                    <img src="/assest/OLIVE/Line 2.png" alt="">
                </div>
                <div class="number">
                    <label for="confirm_password">Confirm password</label>
                    <input type="password" name="" id="confirm_password" required>
                    <img src="/assest/OLIVE/Line 2.png" alt="">
                </div>
                <!-- <div class="number">
                <label for="p2">Upload Picture</label>
                <input type="file" name="logo" id="p2">
                <img src="/assest/OLIVE/Line 2.png" alt="">
            </div> -->
                <button class="btn" id="submitBtn" type="submit">REGISTER</button>
            </form>


            <div class=" otp_content">
                <form id="otpform">
                    <h4 class="otp ">Verify your Phone number or Email</h4>
                    <h5>Enter your OTP code here</h5>
                    <br>
                    <br>

                    <div class="otp">
                        <input type="text" name="one" id="one" maxlength="1" onkeyup="clickEvent(this,'two')">
                        <input type="text" name="two" id="two" maxlength="1" onkeyup="clickEvent(this,'three')">
                        <input type="text" name="three" id="three" maxlength="1" onkeyup="clickEvent(this,'four')">
                        <input type="text" name="four" id="four" maxlength="1" onkeyup="clickEvent(this,'five')">
                        <input type="text" name="five" id="five" maxlength="1">
                    </div>
                    <br>
                    <br>
                    <button type="submit" class="btn">SIGN IN</button>



                </form>



            </div>

            <h6 class="resend">
                <a href="/login" style="color: #801315;">Already a Member Login</a>
            </h6>

            <footer>
                <div class="facebook">
                    <img src="/assest/OLIVE/Ellipse 2.png" />
                    <img class="socialicons" src="/assest/OLIVE/brandico_facebook.png" />
                </div>
                <div class="google">
                    <img src="/assest/OLIVE/Ellipse 2.png" />
                    <img class="socialicons" src="/assest/OLIVE/flat-color-icons_google.png" />
                </div>
                <div class="mail">
                    <img src="/assest/OLIVE/Ellipse 2.png" />
                    <img class="socialicons" src="/assest/OLIVE/clarity_email-outline-badged.png" />
                </div>

            </footer>


        </section>




        <script>

            var input = document.querySelector("#phone");
            window.intlTelInput(input, {
                initialCountry: "NG",
                autoHideDialCode: false,
                utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.3/js/utils.min.js",
            });

            input.addEventListener("open:countrydropdown", function (e) {
                e.target.setAttribute("placeholder", "Select Country");
                e.target.style.width = "40px !important";
            });

            // post fecth / create
            const formed = document.querySelector(".register_link");
            const submitBtn = document.querySelector("#submitBtn");
            const password = document.querySelector("#password");
            const confirm = document.querySelector("#confirm_password");
            const otp_content = document.querySelector(".otp_content")
            const otp = document.querySelectorAll(".otp input")
            const otpform = document.querySelector("#otpform")
            // const continueBtn = document.querySelector(".continue");


            formed.addEventListener("submit", (e) => {
                e.preventDefault();

                if (password.value !== confirm.value) {
                    alert("password does not match");
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = "REGISTER";
                    return false;

                }

                // password validation
                if (password.value.length < 8) {
                    alert("password must be at least 8 characters");
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = "REGISTER";
                    return false;
                }




                // validate number with regex
                if (!input.value.match(/^[0-9]{11}$/)) {
                    alert("number must be 11 digits");
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = "REGISTER";
                    return false;
                }

                // validate email
                if (formed.email.value.indexOf("@") == -1) {
                    alert("invalid email");
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = "REGISTER";
                    return false;
                }

                submitBtn.innerHTML = "Registering...";
                submitBtn.disabled = true;

                // location query


                const payload = {
                    "username": input.value,
                    "email": e.target.email.value,
                    "password": e.target.password.value,
                    "name": e.target.name.value,

                };
                console.log(payload);
                fetch('/', {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                })
                    .then(res => res.json())
                    .then(data => {
                        submitBtn.innerHTML = "REGISTER";
                        if (data.status === "true") {

                            otp_content.style.display = "flex";
                            otp.forEach((ot, i) => {
                                ot.addEventListener("keyup", (e) => {
                                    if (e.target.value.length === 1) {
                                        e.target.nextElementSibling.focus();
                                    }
                                })
                            })
                            formed.style.display = "none"
                        } else {
                            submitBtn.innerHTML = "REGISTER";
                            alert(data.error)
                        }


                    })
            })

            otpform.addEventListener("submit", (e) => {
                e.preventDefault();

                const inputOtp = e.target.one.value.concat(e.target.two.value, e.target.three.value, e.target.four.value, e.target.five.value);
                console.log(inputOtp)


                fetch('/otp', {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        otp: inputOtp
                    })
                }).then(res => res.json())
                    .then(data => {
                        if (data.status === "success") {
                            window.location.href = "/login";
                        }
                        else {
                            alert(data.error)
                            otp.forEach((ot, i) => {
                                ot.value = ""
                            })
                        }


                    })

            })

        </script>

        <%- include ("./partials/footer.ejs") %>