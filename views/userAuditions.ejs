<%- include ("./partials/header.ejs") %>
    <section class="largeImg">
        <div class="swiper">
            <!-- Additional required wrapper -->
            <div class="swiper-wrapper">
                <!-- Slides -->
                <div class="swiper-slide">
                    <img src="/assest/OLIVE/woman.png" />
                </div>
                <div class="swiper-slide">
                    <img style="height: 452px; width: 414px;object-fit: cover;" src="/assest/OLIVE/guy.png" />
                </div>
            </div>
            <!-- If we need pagination -->
            <div class="swiper-pagination"></div>

            <!-- If we need navigation buttons -->

            <div class="swiper-button-prev">
                <img class="carousel-l" src="/assest/OLIVE/Group 2.png" />
            </div>
            <div class="swiper-button-next">
                <img class="carousel" src="/assest/OLIVE/Group 2.png" />
            </div>

            <!-- If we need scrollbar -->
            <div class="swiper-scrollbar"></div>

            <!-- 
            <img src="/assest/OLIVE/guy.png" />
            <img src="/assest/OLIVE/woman.png" />  -->
        </div>
        <!--  -->
    </section>
    <section class="content">
        <h4 class="content_header">MY AUDITIONS</h4>

        <% if (auditions.length===0) { %>
            <p class="no_auditions">You have no auditions</p>
            <% } %>

                <div class="auditionBox">
                    <% if (auditions) { %>
                        <% auditions.forEach(a=> { %>
                            <div class="abox">
                                <div class="abox_content">
                                    <img src="/assest/OLIVE/dot.png" style="margin-left: 5px;" />
                                    <div class="auditiontext">
                                        <h4 style="text-transform: uppercase;">
                                            <%= a.auditionName %>
                                        </h4>
                                        <p>
                                            <%= a.auditionDescription %>
                                        </p>
                                    </div>

                                </div>
                                <div class="abox_content">
                                    <img src="/assest/OLIVE/location.png" />
                                    <p>Nigeria</p>
                                </div>
                                <div class="abox_content">
                                    <img src="/assest/OLIVE/wifi.png" />
                                    <p class="date">
                                        <%= a.auditionStartDate %>
                                    </p>
                                </div>
                                <div class="abox_content">
                                    <img src="/assest/OLIVE/date.png" />
                                    <p>
                                        <% if (a.auditionPattern===1) { %>

                                            Live Event

                                            <% } %>

                                                <% if (a.auditionPattern===0) { %>
                                                    Upload
                                                    <% } %>



                                    </p>
                                </div>
                                <% if (a.auditionPattern===1) { %>
                                    <a target="_blank"
                                        href="https://studio.restream.io/guest/bDBaNllXa7srZaCHW01LjKxavz4ynEU">Go to
                                        Audition</a>
                                    <% } %>
                                        <% if (a.auditionPattern===0) { %>
                                            <form enctype="multipart/form-data">
                                                <input type="file" name="upload" id="upload" hidden>
                                                <label for="upload" style="cursor: pointer;">
                                                    <a class="uploadbtn" style="float: right;">Upload</a>
                                                </label>
                                            </form>

                                            <% } %>
                            </div>
                            <br>

                            <% }) %>
                                <% } %>


                </div>

                <!-- <h4 class="content_header">YOUTH CENTRIC DIGITAL ECOSYSTEM</h4>
        <p class="content_text">
            <strong>Olive platform</strong> is a triumvirate and youth-centric digital ecosystem built for creative
            enthusiasts
            seeking talent discovery, training, incubation, content production, publicity, audience engagement and
            market nexus to monetize digital contents in music, movies, fashion, and creative expressions.
        </p>
        <div class="youtube">
            <img src="/assest/OLIVE/ladyYoutube.png" alt="" srcset="">
            <img class="youtubelogo" src="/assest/OLIVE/fontisto_youtube-play.png">
        </div>
        <div class="join">

            <div class="phoneInput">
                <h4 class="form content_header">JOIN FREE OR SIGN IN</h4>
                <img src="/assest/OLIVE/line 2.png" />
                <form id="form">
                    <div class="flex-form">
                        <select name="" id="">
                        </select>
                        <input type="number" name="" id="">
                    </div>
                    <img src="/assest/OLIVE/line 2.png" />
                    <button class="btn">SIGN IN</button>
                </form>
            </div>
            <p>*By continuing you accept the Promoflo network and OLIVE Terms and Privacy Policy.</p>
            <p>or <span>LOG IN</span> with </p>
        </div> -->
    </section>
    <section style="background-color: #fff;">
        <!-- <h4 style="text-align: center;"> <a style="color: #801315;" href="/logout">logout</a></h4> -->
        <br>
        <br>
    </section>
    <div class="" style="background-color: #fff;">
        <div class="footer_social">
            <div>
                <p>&copy; 2021 GhenGhen Live</p>
            </div>
            <div class="social_icon">
                <img src="/assest/OLIVE/fb.png" />
                <img src="/assest/OLIVE/instagram.png" />
                <img src="/assest/OLIVE/twitter.png" />
            </div>
        </div>
    </div>
    <script>


        const date = document.querySelector(".date");
        const setDate = date.innerHTML;
        // get day

        const day = setDate.slice(0, 2);
        // get month
        const month = setDate.slice(3, 5);

        const upload = document.querySelector("#upload");
        const form = document.querySelector("#form");
        const btn = document.querySelector(".btn");
        const uploadbtn = document.querySelector(".uploadbtn");
        // check if file is video then post to server

        // check if file is video
        upload.addEventListener("change", (e) => {
            const file = e.target.files[0];
            const fileType = file.type;
            if (fileType.match(/video.*/)) {
                btn.style.display = "block";
            } else {
                btn.style.display = "none";
            }
        });


        // video duration check and post to server


        // video duration check
        upload.addEventListener("change", (e) => {
            const file = e.target.files[0];
            const fileType = file.type;
            if (fileType.match(/video.*/)) {
                const video = document.createElement("video");
                video.src = URL.createObjectURL(file);
                video.onloadedmetadata = () => {
                    const duration = video.duration;
                    if (duration > 60) {
                        alert("Video duration cannot be more than 60 seconds");
                        form.reset();
                    } else {
                        // auto add submit event to form
                        form.addEventListener("submit", (e) => {
                            e.preventDefault();
                            const formData = new FormData(form);
                            const xhr = new XMLHttpRequest();
                            xhr.open("POST", "/uploadvideo");
                            xhr.send(formData);
                            xhr.onload = () => {
                                const response = JSON.parse(xhr.responseText);
                                if (response.status === "success") {
                                    alert("Video uploaded successfully");
                                    form.reset();
                                    uploadbtn.style.display = "none";
                                } else {
                                    alert("Video upload failed");
                                }
                            }
                        });
                        // post formdata to server and display success message



                    }
                };
            } else {
                alert("Please upload a video file");
                form.reset();
            }
        });








    </script>
    <%- include("./partials/footer.ejs") %>